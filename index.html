

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Orion &mdash; Orion 0.1.0-dev documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Orion" href="readme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> Orion
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Orion</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#id1">Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id2">Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id3">Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id4">Dataset we use in this library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#id5">Orion Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id6">Current Available Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id9">Leaderboard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#id10">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id11">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#mongodb">MongoDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id13">Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#docker">Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id15">Quickstart: Run a Pipeline on the Demo Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#load-the-data">1. Load the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#detect-anomalies-using-a-pipeline">2. Detect anomalies using a pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#evaluate-performance">3. Evaluate performance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id16">Database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#id17">Docker Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id18">Docker Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id19">Building the Orion Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id20">Distributing the Orion Docker Image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#distributing-using-a-docker-registry">Distributing using a Docker registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#distributing-as-a-file">Distributing as a file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#id21">Running the orion-jupyter image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#running-orion-jupyter-with-the-code">Running orion-jupyter with the code</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#running-orion-jupyter-without-the-orion-code">Running orion-jupyter without the orion code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/orion.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/orion.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/orion.analysis.html">orion.analysis module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.cli.html">orion.cli module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.data.html">orion.data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.evaluation.html">orion.evaluation module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.explorer.html">orion.explorer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.metrics.html">orion.metrics module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.model.html">orion.model module</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/orion.utils.html">orion.utils module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#types-of-contributions">Types of Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#report-bugs">Report Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#fix-bugs">Fix Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#implement-features">Implement Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#write-documentation">Write Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#submit-feedback">Submit Feedback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#unit-testing-guidelines">Unit Testing Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#tips">Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#release-workflow">Release Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="history.html#id1">0.1.0</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Orion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Orion</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/D3-AI/Orion/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="center">
<img width=30% src="https://dai.lids.mit.edu/wp-content/uploads/2018/08/orion.png" alt=“Orion” />
</p><p align="center">
<i>Orion is a machine learning library built for telemetry data generated by satellites.</I>
</p><p align="center">
<i>A project from Data to AI Lab at MIT.</I>
</p><div class="section" id="orion">
<h1>Orion<a class="headerlink" href="#orion" title="Permalink to this headline">¶</a></h1>
<p>Orion is a machine learning library built for telemetry data generated by Satellites.</p>
<p>With this data, our interest is to develop techniques to:</p>
<ul class="simple">
<li><p>identify rare patterns and flag them for expert review.</p></li>
<li><p>predict outcomes ahead of time.</p></li>
</ul>
<p>The library makes use of a number of <em>automated machine learning</em> tools developed under
<a class="reference external" href="https://github.com/HDI-Project">“The human data interaction project”</a> within the
<a class="reference external" href="https://dai.lids.mit.edu/">Data to AI Lab at MIT</a>.</p>
<p>With the ready availability of <em>automated machine learning</em> tools, the focus is on:</p>
<ul class="simple">
<li><p>domain expert interaction with the machine learning system;</p></li>
<li><p>learning from minimal labels;</p></li>
<li><p>explainability of model outputs;</p></li>
<li><p>model audit;</p></li>
<li><p>scalability;</p></li>
</ul>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>MIT license</p></li>
</ul>
</div>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#data-format">Data Format</a></p>
<ul>
<li><p><a class="reference external" href="#input">Input</a></p></li>
<li><p><a class="reference external" href="#output">Output</a></p></li>
<li><p><a class="reference external" href="#dataset-we-use-in-this-library">Dataset we use in this library</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#orion-pipelines">Orion Pipelines</a></p>
<ul>
<li><p><a class="reference external" href="#current-available-pipelines">Current Available Pipelines</a></p></li>
<li><p><a class="reference external" href="#leaderboard">Leaderboard</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#getting-started">Getting Started</a></p>
<ul>
<li><p><a class="reference external" href="#requirements">Requirements</a></p></li>
<li><p><a class="reference external" href="#install">Install</a></p></li>
<li><p><a class="reference external" href="#quickstart-run-a-pipeline-on-the-demo-dataset">Quickstart: Run a Pipeline on the Demo Dataset</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#database">Database</a></p></li>
<li><p><a class="reference external" href="#docker-usage">Docker Usage</a></p>
<ul>
<li><p><a class="reference external" href="#docker-requirements">Docker Requirements</a></p></li>
<li><p><a class="reference external" href="#building-the-orion-docker-image">Building the Orion Docker Image</a></p></li>
<li><p><a class="reference external" href="#distributing-the-orion-docker-image">Distributing the Orion Docker Image</a></p></li>
<li><p><a class="reference external" href="#running-the-orion-jupyter-image">Running the orion-jupyter image</a></p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="id1">
<h1>Data Format<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>Input<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><strong>Orion Pipelines</strong> work on time Series that are provided as a single table of telemetry
observations with two columns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>: an INTEGER or FLOAT column with the time of the observation in
<a class="reference external" href="https://en.wikipedia.org/wiki/Unix_time">Unix Time Format</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: an INTEGER or FLOAT column with the observed value at the indicated timestamp</p></li>
</ul>
<p>This is an example of such table:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>timestamp</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1222819200</p></td>
<td><p>-0.366358</p></td>
</tr>
<tr class="row-odd"><td><p>1222840800</p></td>
<td><p>-0.394107</p></td>
</tr>
<tr class="row-even"><td><p>1222862400</p></td>
<td><p>0.403624</p></td>
</tr>
<tr class="row-odd"><td><p>1222884000</p></td>
<td><p>-0.362759</p></td>
</tr>
<tr class="row-even"><td><p>1222905600</p></td>
<td><p>-0.370746</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h2>Output<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>The output of the <strong>Orion Pipelines</strong> is another table that contains the detected anomalous
intervals and that has at least two columns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code>: timestamp where the anomalous interval starts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end</span></code>: timestamp where the anomalous interval ends</p></li>
</ul>
<p>Optionally, a third column called <code class="docutils literal notranslate"><span class="pre">score</span></code> can be included with a value that represents the
severity of the detected anomaly.</p>
<p>An example of such a table is:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start</p></th>
<th class="head"><p>end</p></th>
<th class="head"><p>score</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1222970400</p></td>
<td><p>1222992000</p></td>
<td><p>0.572643</p></td>
</tr>
<tr class="row-odd"><td><p>1223013600</p></td>
<td><p>1223035200</p></td>
<td><p>0.572643</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h2>Dataset we use in this library<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>For development, evaluation of pipelines, we include a dataset which includes several satellite
telemetry signals already formatted as expected by the Orion Pipelines.</p>
<p>This formatted dataset can be browsed and downloaded directly from the
<a class="reference external" href="https://d3-ai-orion.s3.amazonaws.com/index.html">d3-ai-orion AWS S3 Bucket</a>.</p>
<p>This dataset is adapted from the one used for the experiments in the
<a class="reference external" href="https://arxiv.org/abs/1802.04431">Detecting Spacecraft Anomalies Using LSTMs and Nonparametric Dynamic Thresholding paper</a>.
<a class="reference external" href="https://s3-us-west-2.amazonaws.com/telemanom/data.zip">Original source data is available for download here</a>.
We thank NASA for making this data available for public use.</p>
</div>
</div>
<div class="section" id="id5">
<h1>Orion Pipelines<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<p>The main component in the Orion project are the <strong>Orion Pipelines</strong>, which consist of
<a class="reference external" href="https://hdi-project.github.io/MLBlocks/advanced_usage/pipelines.html">MLBlocks Pipelines</a>
specialized in detecting anomalies in time series.</p>
<p>As <code class="docutils literal notranslate"><span class="pre">MLPipeline</span></code> instances, <strong>Orion Pipelines</strong>:</p>
<ul class="simple">
<li><p>consist of a list of one or more <a class="reference external" href="https://hdi-project.github.io/MLPrimitives/">MLPrimitives</a></p></li>
<li><p>can be <em>fitted</em> on some data and later on used to <em>predict</em> anomalies on more data</p></li>
<li><p>can be <em>scored</em> by comparing their predictions with some known anomalies</p></li>
<li><p>have <em>hyperparameters</em> that can be <em>tuned</em> to improve their anomaly detection performance</p></li>
<li><p>can be stored as a JSON file that includes all the primitives that compose them, as well as
other required configuration options.</p></li>
</ul>
<div class="section" id="id6">
<h2>Current Available Pipelines<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>In the <strong>Orion Project</strong>, the pipelines are included as <strong>JSON</strong> files, which can be found
inside the <a class="reference external" href="orion/pipelines">orion/pipelines</a> folder.</p>
<p>This is the list of pipelines available so far, which will grow over time:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>location</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Dummy</p></td>
<td><p><a class="reference external" href="orion/pipelines/dummy.json">orion/pipelines/dummy.json</a></p></td>
<td><p>Dummy Pipeline to showcase the input and output format and the usage of sample primitives</p></td>
</tr>
<tr class="row-odd"><td><p>LSTM Dynamic Thresholding</p></td>
<td><p><a class="reference external" href="orion/pipelines/lstm_dynamic_threshold.json">orion/pipelines/lstm_dynamic_threshold.json</a></p></td>
<td><p>LSTM Based pipeline inspired by the <a class="reference external" href="https://arxiv.org/abs/1802.04431">Detecting Spacecraft Anomalies Using LSTMs and Nonparametric Dynamic Thresholding paper</a></p></td>
</tr>
<tr class="row-even"><td><p>Mean 24h LSTM</p></td>
<td><p><a class="reference external" href="orion/pipelines/mean_24h_lstm.json">orion/pipelines/mean_24h_lstm.json</a></p></td>
<td><p>LSTM Based pipeline with 24h mean aggregation preprocessing</p></td>
</tr>
<tr class="row-odd"><td><p>Median 24h LSTM</p></td>
<td><p><a class="reference external" href="orion/pipelines/median_24h_lstm.json">orion/pipelines/median_24h_lstm.json</a></p></td>
<td><p>LSTM Based pipeline with 24h median aggregation preprocessing</p></td>
</tr>
<tr class="row-even"><td><p>Sum 24h LSTM</p></td>
<td><p><a class="reference external" href="orion/pipelines/sum_24h_lstm.json">orion/pipelines/sum_24h_lstm.json</a></p></td>
<td><p>LSTM Based pipeline with 24h sum aggregation preprocessing</p></td>
</tr>
<tr class="row-odd"><td><p>Skew 24h LSTM</p></td>
<td><p><a class="reference external" href="orion/pipelines/skew_24h_lstm.json">orion/pipelines/skew_24h_lstm.json</a></p></td>
<td><p>LSTM Based pipeline with 24h skew aggregation preprocessing</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h2>Leaderboard<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>In this repository we maintain this up-to-date leaderboard with the current scoring of the
pipelines according to the scoring procedure explained in the <a class="reference external" href="SCORING.md">SCORING.md</a> document.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pipeline</p></th>
<th class="head"><p>rank</p></th>
<th class="head"><p>accuracy</p></th>
<th class="head"><p>f1</p></th>
<th class="head"><p>precision</p></th>
<th class="head"><p>recall</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LSTM Dynamic Thresholding</p></td>
<td><p>1</p></td>
<td><p>0.914346</p></td>
<td><p>0.0959928</p></td>
<td><p>0.519355</p></td>
<td><p>0.0632723</p></td>
</tr>
<tr class="row-odd"><td><p>Sum 24h LSTM</p></td>
<td><p>2</p></td>
<td><p>0.909754</p></td>
<td><p>0.0051408</p></td>
<td><p>0.12791</p></td>
<td><p>0.0033509</p></td>
</tr>
<tr class="row-even"><td><p>Median 24h LSTM</p></td>
<td><p>3</p></td>
<td><p>0.90824</p></td>
<td><p>0.00423816</p></td>
<td><p>0.0438055</p></td>
<td><p>0.00497061</p></td>
</tr>
<tr class="row-odd"><td><p>Skew 24h LSTM</p></td>
<td><p>4</p></td>
<td><p>0.900272</p></td>
<td><p>0.00060083</p></td>
<td><p>0.0220449</p></td>
<td><p>0.000311794</p></td>
</tr>
<tr class="row-even"><td><p>Mean 24h LSTM</p></td>
<td><p>5</p></td>
<td><p>0.871457</p></td>
<td><p>0.00610279</p></td>
<td><p>0.103166</p></td>
<td><p>0.00593213</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id10">
<h1>Getting Started<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id11">
<h2>Requirements<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p><strong>Orion</strong> has been developed and runs on <a class="reference external" href="https://www.python.org/downloads/release/python-360/">Python 3.6</a>.</p>
<p>Also, although it is not strictly required, the usage of a <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtualenv</a>
is highly recommended in order to avoid interfering with other software installed in the system
where you are trying to run <strong>Orion</strong>.</p>
</div>
<div class="section" id="mongodb">
<h3>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h3>
<p>In order to be fully operational, <strong>Orion</strong> requires having access to a
<a class="reference external" href="https://www.mongodb.com/">MongoDB</a> database running version <strong>3.6</strong> or higher.</p>
</div>
</div>
<div class="section" id="id13">
<h2>Install<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<p>Since <strong>Orion</strong> is a private project, the only way to install it is by cloning or downloading
its sources from its <a class="reference external" href="https://github.com/D3-AI/Orion">GitHub repository</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:D3-AI/Orion.git
</pre></div>
</div>
<p>After cloning the repository and creating and activating a virtualenv, you can install
the project with this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make install
</pre></div>
</div>
<p>For development, use the following command instead, which will install some additional
dependencies for code linting and testing</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make install-develop
</pre></div>
</div>
<div class="section" id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<p>Even thought it’s not mandatory to use it, <strong>Orion</strong> comes with the possibility to be
distributed and run as a docker image, making its usage in offline systems easier.</p>
<p>For more details please head to the <a class="reference external" href="#docker-usage">Docker Usage</a> section below.</p>
</div>
</div>
<div class="section" id="id15">
<h2>Quickstart: Run a Pipeline on the Demo Dataset<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p>In the following steps we will show a short guide about how to run one of the <strong>Orion Pipelines</strong>
on one of the signals from the <strong>Demo Dataset</strong>.</p>
<div class="section" id="load-the-data">
<h3>1. Load the data<a class="headerlink" href="#load-the-data" title="Permalink to this headline">¶</a></h3>
<p>In the first step we will load the <strong>S-1</strong> signal from the <strong>Demo Dataset</strong>.</p>
<p>We will do so in two parts, train and test, as we will use the first part to fit the
pipeline and the second one to evaluate its performance.</p>
<p>To do so, we need to import the <code class="docutils literal notranslate"><span class="pre">orion.data.load_signal</span></code> function and call it twice passing
the <code class="docutils literal notranslate"><span class="pre">'S-1-train'</span></code> and <code class="docutils literal notranslate"><span class="pre">'S-1-test'</span></code> names.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">orion.data</span> <span class="kn">import</span> <span class="n">load_signal</span>

<span class="n">train</span> <span class="o">=</span> <span class="n">load_signal</span><span class="p">(</span><span class="s1">&#39;S-1-train&#39;</span><span class="p">)</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">load_signal</span><span class="p">(</span><span class="s1">&#39;S-1-test&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output will be a table in the format described above:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>    <span class="k">timestamp</span>     <span class="n">value</span>
<span class="mi">0</span>  <span class="mi">1222819200</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">366359</span>
<span class="mi">1</span>  <span class="mi">1222840800</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">394108</span>
<span class="mi">2</span>  <span class="mi">1222862400</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">403625</span>
<span class="mi">3</span>  <span class="mi">1222884000</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">362759</span>
<span class="mi">4</span>  <span class="mi">1222905600</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">370746</span>
</pre></div>
</div>
</div>
<div class="section" id="detect-anomalies-using-a-pipeline">
<h3>2. Detect anomalies using a pipeline<a class="headerlink" href="#detect-anomalies-using-a-pipeline" title="Permalink to this headline">¶</a></h3>
<p>Once we have the data, let us try to use the LSTM pipeline to analyze it and search for anomalies.</p>
<p>In order to do so, we will have import the <code class="docutils literal notranslate"><span class="pre">orion.analysis.analyze</span></code> function and pass it
the train and test dataframes and the path to the pipeline JSON that we want to use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">orion.analysis</span> <span class="kn">import</span> <span class="n">analyze</span>

<span class="n">pipeline_path</span> <span class="o">=</span> <span class="s1">&#39;orion/pipelines/lstm_dynamic_threshold.json&#39;</span>

<span class="n">anomalies</span> <span class="o">=</span> <span class="n">analyze</span><span class="p">(</span><span class="n">pipeline_path</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>NOTE:</strong> Depending on your system and the exact versions that you might have installed
some <em>WARNINGS</em> may be printed. These can be safely ignored as they do not interfere
with the proper behavior of the pipeline.</p>
<p>The output of the previous command will be a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> containing a table in the
Output format described above:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>        <span class="nv">start</span>         <span class="k">end</span>     <span class="nv">score</span>
<span class="mi">0</span>  <span class="mi">1394323200</span>  <span class="mi">1399701600</span>  <span class="mi">0</span>.<span class="mi">673494</span>
</pre></div>
</div>
</div>
<div class="section" id="evaluate-performance">
<h3>3. Evaluate performance<a class="headerlink" href="#evaluate-performance" title="Permalink to this headline">¶</a></h3>
<p>In this next step we will load some already known anomalous intervals and evaluate how
good our anomaly detection was by comparing those with our detected intervals.</p>
<p>For this, we will first load the known anomalies for the signal that we are using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">orion.data</span> <span class="kn">import</span> <span class="n">load_anomalies</span>

<span class="n">known_anomalies</span> <span class="o">=</span> <span class="n">load_anomalies</span><span class="p">(</span><span class="s1">&#39;S-1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output will be a table in the same format as the <code class="docutils literal notranslate"><span class="pre">anomalies</span></code> one.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>        <span class="nv">start</span>         <span class="k">end</span>
<span class="mi">0</span>  <span class="mi">1392768000</span>  <span class="mi">1402423200</span>
</pre></div>
</div>
<p>Afterwards, we pass the ground truth, the detected anomalies and the original test data
to the <code class="docutils literal notranslate"><span class="pre">orion.metrics.accuracy_score</span></code> and <code class="docutils literal notranslate"><span class="pre">orion.metrics.f1_score</span></code> functions in order
to compute a score that indicates how good our anomaly detection was:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">orion.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">f1_score</span>

<span class="n">accuracy_score</span><span class="p">(</span><span class="n">known_anomalies</span><span class="p">,</span> <span class="n">anomalies</span><span class="p">,</span> <span class="n">test</span><span class="p">)</span>  <span class="c1"># -&gt; 0.972987721691678</span>

<span class="n">f1_score</span><span class="p">(</span><span class="n">known_anomalies</span><span class="p">,</span> <span class="n">anomalies</span><span class="p">,</span> <span class="n">test</span><span class="p">)</span>  <span class="c1"># -&gt; 0.7155172413793103</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id16">
<h2>Database<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p><strong>Orion</strong> comes ready to use a MongoDB Database to easily register and explore:</p>
<ul class="simple">
<li><p>Multiple Datasets based on signals from one or more satellites.</p></li>
<li><p>Multiple Pipelines, including historical Pipeline versions.</p></li>
<li><p>Pipeline executions on the registered Datasets, including any environment details required to
later on reproduce the results.</p></li>
<li><p>Pipeline execution results and detected events.</p></li>
<li><p>Comments about the detected events.</p></li>
</ul>
<p>This, among other things, allows:</p>
<ul class="simple">
<li><p>Providing visibility about the system usage.</p></li>
<li><p>Keeping track of the evolution of the registered pipelines and their performance over multiple datasets.</p></li>
<li><p>Visualizing and browsing the detected events by the pipelines using a web application.</p></li>
<li><p>Collecting comments from multiple domain experts about the detected events to be able to later
on curate the pipelines based on their knowledge.</p></li>
<li><p>Reproducing previous executions in identical environments to replicate the obtained results.</p></li>
<li><p>Detecting and keeping a history of system failures for later investigation.</p></li>
</ul>
<p>The complete <strong>Database schema and usage instructions</strong> can be found in the
<a class="reference external" href="DATABASE.md">DATABASE.md</a> file</p>
</div>
</div>
<div class="section" id="id17">
<h1>Docker Usage<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h1>
<p><strong>Orion</strong> comes configured and ready to be distributed and run as a docker image which starts
a jupyter notebook already configured to use orion, with all the required dependencies already
installed.</p>
<div class="section" id="id18">
<h2>Docker Requirements<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<p>The only requirement in order to run the Orion Docker image is to have Docker installed and
that the user has enough permissions to run it.</p>
<p>Installation instructions for any possible system compatible can be found <a class="reference external" href="https://docs.docker.com/install/">here</a></p>
<p>Additionally, the system that builds the Orion Docker image will also need to have a working
internet connection that allows downloading the base image and the additional python depenedencies.</p>
</div>
<div class="section" id="id19">
<h2>Building the Orion Docker Image<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<p>After having cloned the <strong>Orion</strong> repository, all you have to do in order to build the Orion Docker
Image is running this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make docker-jupyter-build
</pre></div>
</div>
<p>After a few minutes, the new image, called <code class="docutils literal notranslate"><span class="pre">orion-jupyter</span></code>, will have been built into the system
and will be ready to be used or distributed.</p>
</div>
<div class="section" id="id20">
<h2>Distributing the Orion Docker Image<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<p>Once the <code class="docutils literal notranslate"><span class="pre">orion-jupyter</span></code> image is built, it can be distributed in several ways.</p>
<div class="section" id="distributing-using-a-docker-registry">
<h3>Distributing using a Docker registry<a class="headerlink" href="#distributing-using-a-docker-registry" title="Permalink to this headline">¶</a></h3>
<p>The simplest way to distribute the recently created image is <a class="reference external" href="https://docs.docker.com/registry/">using a registry</a>.</p>
<p>In order to do so, we will need to have write access to a public or private registry (remember to
<a class="reference external" href="https://docs.docker.com/engine/reference/commandline/login/">login</a>!) and execute these commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker tag orion-jupyter:latest your-registry-name:some-tag
docker push your-registry-name:some-tag
</pre></div>
</div>
<p>Afterwards, in the receiving machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker pull your-registry-name:some-tag
docker tag your-registry-name:some-tag orion-jupyter:latest
</pre></div>
</div>
</div>
<div class="section" id="distributing-as-a-file">
<h3>Distributing as a file<a class="headerlink" href="#distributing-as-a-file" title="Permalink to this headline">¶</a></h3>
<p>If the distribution of the image has to be done offline for any reason, it can be achieved
using the following command.</p>
<p>In the system that already has the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker save --output orion-jupyter.tar orion-jupyter
</pre></div>
</div>
<p>Then copy over the file <code class="docutils literal notranslate"><span class="pre">orion-jupyter.tar</span></code> to the new system and there, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker load --input orion-jupyter.tar
</pre></div>
</div>
<p>After these commands, the <code class="docutils literal notranslate"><span class="pre">orion-jupyter</span></code> image should be available and ready to be used in the
new system.</p>
</div>
</div>
<div class="section" id="id21">
<h2>Running the orion-jupyter image<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<p>Once the <code class="docutils literal notranslate"><span class="pre">orion-jupyter</span></code> image has been built, pulled or loaded, it is ready to be run.</p>
<p>This can be done in two ways:</p>
<div class="section" id="running-orion-jupyter-with-the-code">
<h3>Running orion-jupyter with the code<a class="headerlink" href="#running-orion-jupyter-with-the-code" title="Permalink to this headline">¶</a></h3>
<p>If the Orion source code is available in the system, running the image is as simple as running
this command from within the root of the project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make docker-jupyter-run
</pre></div>
</div>
<p>This will start a jupyter notebook using the docker image, which you can access by pointing your
browser at <a class="reference external" href="http://127.0.0.1:8888">http://127.0.0.1:8888</a></p>
<p>In this case, the local version of the project will also mounted within the Docker container,
which means that any changes that you do in your local code will immediately be available
within your notebooks, and that any notebook that you create within jupyter will also show
up in your <code class="docutils literal notranslate"><span class="pre">notebooks</span></code> folder!</p>
</div>
<div class="section" id="running-orion-jupyter-without-the-orion-code">
<h3>Running orion-jupyter without the orion code<a class="headerlink" href="#running-orion-jupyter-without-the-orion-code" title="Permalink to this headline">¶</a></h3>
<p>If the Orion source code is not available in the system and only the Docker Image is, you can
still run the image by using this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -ti -p8888:8888 orion-jupyter
</pre></div>
</div>
<p>In this case, the code changes and the notebooks that you create within jupyter will stay
inside the container and you will only be able to access and download them through the
jupyter interface.</p>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="readme.html" class="btn btn-neutral float-right" title="Orion" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MIT Data To AI Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>